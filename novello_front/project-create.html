<!-- âœ… ìƒëµ ì—†ì´ ì „ì²´ HTMLì…ë‹ˆë‹¤. -->
<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Novello Studio - ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±</title>
        <style>
            body {
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                background-color: #f7f7f7;
                margin: 0;
                padding: 0;
            }

            header {
                background-color: #2c3e50;
                color: white;
                padding: 20px;
                text-align: center;
            }

            .container {
                max-width: 700px;
                margin: 50px auto;
                background-color: white;
                padding: 40px;
                border-radius: 10px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }

            h2 {
                text-align: center;
                margin-bottom: 30px;
            }

            label {
                font-weight: bold;
                display: block;
                margin: 15px 0 5px;
            }

            .input-row {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            input[type="text"],
            select,
            textarea {
                flex: 1;
                padding: 12px;
                border: 1px solid #ccc;
                border-radius: 6px;
                resize: vertical;
                font-size: 16px;
            }

            textarea {
                height: 120px;
            }

            .ai-btn {
                padding: 8px 12px;
                font-size: 14px;
                background-color: #eee;
                border: 1px solid #bbb;
                border-radius: 6px;
                cursor: pointer;
            }

            .create-btn {
                width: 100%;
                margin-top: 30px;
                padding: 15px;
                font-size: 18px;
                background-color: #3498db;
                color: white;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                transition: background-color 0.3s;
            }

            .create-btn:hover {
                background-color: #2980b9;
            }

            footer {
                text-align: center;
                margin-top: 80px;
                padding: 20px;
                font-size: 14px;
                color: #777;
                background-color: #ecf0f1;
            }

            /* ëª¨ë‹¬ */
            .modal-backdrop {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(0, 0, 0, 0.4);
                display: none;
                align-items: center;
                justify-content: center;
                z-index: 9999;
            }

            .modal {
                background: white;
                border-radius: 10px;
                padding: 30px;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                text-align: center;
            }

            .modal h3 {
                margin-top: 0;
            }

            .modal button {
                margin-top: 20px;
                padding: 10px 20px;
                background: #3498db;
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>ğŸ“˜ ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°</h1>
        </header>

        <div class="container">
            <h2>í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</h2>

            <form onsubmit="handleSubmit(event)">
                <label for="title">í”„ë¡œì íŠ¸ ì œëª©</label>
                <div class="input-row">
                    <input type="text" id="title" required placeholder="ì˜ˆ: ì–´ë‘  ì†ì˜ ë³„ë¹›" />
                    <button type="button" class="ai-btn" onclick="showModal('title')">AI ì œì•ˆ</button>
                </div>

                <label for="genre">ì¥ë¥´ ì„ íƒ</label>
                <div class="input-row">
                    <select id="genre" required>
                        <option value="">-- ì¥ë¥´ ì„ íƒ --</option>
                        <option value="íŒíƒ€ì§€">íŒíƒ€ì§€</option>
                        <option value="ë¡œë§¨ìŠ¤">ë¡œë§¨ìŠ¤</option>
                        <option value="SF">SF</option>
                        <option value="ìŠ¤ë¦´ëŸ¬">ìŠ¤ë¦´ëŸ¬</option>
                        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                    </select>
                    <button type="button" class="ai-btn" onclick="showModal('genre')">AI ì œì•ˆ</button>
                </div>

                <label for="keywords">ì„¸ê³„ê´€ í‚¤ì›Œë“œ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
                <div class="input-row">
                    <input type="text" id="keywords" placeholder="ì˜ˆ: ì´ì„¸ê³„, ë§ˆë²•, ì™•êµ­, ì „ìŸ" />
                    <button type="button" class="ai-btn" onclick="showModal('keywords')">AI ì œì•ˆ</button>
                </div>

                <label for="worldview">ê°„ë‹¨í•œ ì„¸ê³„ê´€ ì„¤ëª…</label>
                <div class="input-row">
                    <textarea
                        id="worldview"
                        placeholder="ì˜ˆ: ì´ ì„¸ê³„ëŠ” ë§ˆë²•ê³¼ ê¸°ê³„ê°€ ê³µì¡´í•˜ëŠ” ì‹ ë¹„ë¡œìš´ ëŒ€ë¥™ì—ì„œ í¼ì³ì§€ëŠ” ì „ìŸ ì´ì•¼ê¸°ì…ë‹ˆë‹¤."
                    ></textarea>
                    <button type="button" class="ai-btn" onclick="showModal('worldview')">AI ì œì•ˆ</button>
                </div>

                <button type="submit" class="create-btn">ì„¸ê³„ê´€ ìƒì„± ì‹œì‘í•˜ê¸°</button>
            </form>
        </div>

        <div id="modal-backdrop" class="modal-backdrop" onclick="closeModal(event)">
            <div class="modal" onclick="event.stopPropagation()">
                <h3 id="modal-title">AI ì œì•ˆ ìš”ì²­</h3>

                <!-- ë‹¨ê³„ 1: ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥ -->
                <div id="step-prompt">
                    <p>ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì œì•ˆí•´ë“œë¦´ê¹Œìš”?</p>
                    <input
                        type="text"
                        id="promptInput"
                        placeholder="ì˜ˆ: ê°ì„±ì ì¸ ì œëª©ìœ¼ë¡œ ì¶”ì²œí•´ì¤˜"
                        style="width: 100%; padding: 10px; margin-top: 10px"
                    />
                    <button onclick="generateSuggestion()" style="margin-top: 20px">í™•ì¸</button>
                </div>

                <!-- ë‹¨ê³„ 2: AI ì œì•ˆ í‘œì‹œ -->
                <div id="step-suggestion" style="display: none">
                    <p><strong>AI ì œì•ˆ ê²°ê³¼:</strong></p>
                    <p
                        id="modal-suggestion"
                        style="white-space: pre-line; background: #f4f4f4; padding: 10px; border-radius: 6px"
                    ></p>
                    <div style="margin-top: 20px">
                        <button onclick="applySuggestion()">ì ìš©</button>
                        <button onclick="closeModal()">ì·¨ì†Œ</button>
                    </div>
                </div>
            </div>
        </div>

        <footer>Â© 2025 Novello Studio. All rights reserved.</footer>

        <script>
            let currentTargetField = null;
            let currentGeneratedText = "";

            // ëª¨ë‹¬ ì—´ê¸°
            function showModal(field) {
                currentTargetField = field;
                document.getElementById("modal-title").innerText = "AI ì œì•ˆ ìš”ì²­";
                document.getElementById("promptInput").value = "";
                document.getElementById("step-prompt").style.display = "block";
                document.getElementById("step-suggestion").style.display = "none";
                document.getElementById("modal-backdrop").style.display = "flex";
            }

            // ì‚¬ìš©ì ì§ˆë¬¸ ê¸°ë°˜ìœ¼ë¡œ ê°€ì§œ AI ì œì•ˆ ìƒì„±
            function generateSuggestion() {
                const userRequest = document.getElementById("promptInput").value.trim();
                if (!userRequest) {
                    alert("ìš”ì²­ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                    return;
                }

                // ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì— AI API ì—°ë™
                const samples = {
                    title: `ì˜ˆ: 'ì–´ë‘  ì†ì˜ ë³„ë¹›', 'ì‹œê°„ì„ ê±·ëŠ” ì•„ì´', 'ë§ê°ì˜ ìˆ²'`,
                    genre: `ì¥ë¥´ë³„ ë¶„ìœ„ê¸° ì¶”ì²œ:\n- íŒíƒ€ì§€: ëŒ€ë¥™, ì™•êµ­, ë§ˆë²•\n- ë¡œë§¨ìŠ¤: ê°ì • ì¤‘ì‹¬\n- SF: ê¸°ìˆ /ë¯¸ë˜ì‚¬íšŒ`,
                    keywords: `ì˜ˆ: ë§ˆë²•, ì´ì„¸ê³„, ìš´ëª…, ì „ìŸ, í˜ëª…`,
                    worldview: `ì´ ì„¸ê³„ëŠ” ê³ ëŒ€ ì‹ ë“¤ì˜ ë§ˆë²•ê³¼ ê¸°ê³„ ë¬¸ëª…ì´ ì¶©ëŒí•˜ë©° ì‹œì‘ëœ ëŒ€ì „ìŸ ì´í›„, ë¬´ë„ˆì§„ ì§ˆì„œë¥¼ ë˜ì°¾ê¸° ìœ„í•œ ì—¬ì •ì„ ê·¸ë¦°ë‹¤.`,
                };

                const fallback = `ì˜ˆì‹œë¥¼ ê¸°ë°˜ìœ¼ë¡œ AIê°€ ì œì•ˆí•œ ê²°ê³¼ì…ë‹ˆë‹¤.\nìš”ì²­: ${userRequest}\nâ†’ ê²°ê³¼: (${samples[currentTargetField]})`;

                currentGeneratedText = samples[currentTargetField] || fallback;

                document.getElementById("modal-suggestion").innerText = currentGeneratedText;
                document.getElementById("step-prompt").style.display = "none";
                document.getElementById("step-suggestion").style.display = "block";
            }

            // ì ìš© ë²„íŠ¼
            function applySuggestion() {
                const field = document.getElementById(currentTargetField);
                if (field) {
                    field.value = currentGeneratedText.replace(/^ì˜ˆ:\s*/, "");
                }
                closeModal();
            }

            // ëª¨ë‹¬ ë‹«ê¸°
            function closeModal(e) {
                if (e && e.target !== document.getElementById("modal-backdrop")) return;
                document.getElementById("modal-backdrop").style.display = "none";
            }
        </script>
    </body>
</html>
